<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="stylesheet" href="style.css" type="text/css">
</head>

<headr>
<h1>Count test</h1>
</headr>

<body>

<script type="text/javascript">

var stepCount = 0;
var G = 9.8;
var hiThreshold = G*1.1;
var lowThreshold = G*0.9;

var flag =0;

var write = function(stepCount){
	

window.addEventListener("devicemotion", function(event){


	var ag = event.accelerationIncludingGravity;

	var acc = Math.sqrt(ag.x*ag.x + ag.y*ag.y +ag.z*ag.z);

	if(flag === 0){
		if(acc<lowThreshold){
			stepCount++;
			flag = 1;
		}
	}else{
		if(acc>hiThreshold){
			flag = 0;
		}

	}

	var Step = document.getElementById('step');
	Step.innerHTML = stepCount;

	var A = document.getElementById('AC');
	A.innerHTML = acc;

	/*
	var Step = document.getElementById('step');
	Step.value = stepCount;
	*/
	
},true)



</script>

<h2>歩数</h2>
<div id="step"></div><br>


<p id="AC"></p>



</body>